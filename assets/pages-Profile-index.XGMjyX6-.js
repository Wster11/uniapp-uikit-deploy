import{d as e,q as a,r as t,s,v as l,o as r,c as o,w as i,a as n,t as p,u,b as f,y as c,g as m,x as d}from"./index-USJ8ZV9j.js";import{N as g}from"./index.C1k3bsgS.js";import{A as v}from"./index.D-3UPTzE.js";import{M as _}from"./index.BfIFvBkH.js";import{t as h}from"./locales.BEWoqkcc.js";import{_ as x}from"./_plugin-vue_export-helper.BCo6x5W8.js";const C=x(e({__name:"index",setup(e){const x=a.getChatConn().user,C=t({}),j=s((()=>{C.value=a.appUserStore.getSelfUserInfo()})),k=()=>{uni.navigateBack()},S=()=>{uni.navigateTo({url:"/pages/ProfileSetting/index"})},U=()=>{uni.chooseImage({count:1,success:e=>{uni.uploadFile({url:c(x),filePath:e.tempFilePaths[0],fileType:"image",name:"file",header:{Authorization:"Bearer "+a.getChatConn().token},success:e=>{const t=JSON.parse(e.data);a.appUserStore.updateUserInfo({avatarurl:t.avatarUrl})}})}})};return l((()=>{j()})),(e,a)=>{const t=m;return r(),o(t,{class:"profile-wrap"},{default:i((()=>[n(g,{onOnLeftTap:k},{left:i((()=>[n(t,{class:"title",textContent:p(u(h)("profileTitle"))},null,8,["textContent"])])),_:1}),n(t,{class:"menu-wrap"},{default:i((()=>[n(_,{class:"profile-menu",title:u(h)("profileAvatar"),onClick:U},{right:i((()=>[n(v,{class:"profile-avatar",src:C.value.avatar,size:40,placeholder:u(d)},null,8,["src","placeholder"])])),_:1},8,["title"]),n(_,{class:"profile-menu",title:u(h)("profileNick"),onClick:S},{right:i((()=>[n(t,{class:"profile-name ellipsis"},{default:i((()=>[f(p(C.value.name),1)])),_:1})])),_:1},8,["title"])])),_:1})])),_:1})}}}),[["__scopeId","data-v-5f86112f"]]);export{C as default};
