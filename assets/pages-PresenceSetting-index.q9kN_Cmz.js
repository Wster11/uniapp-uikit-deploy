import{d as e,r as a,a as l,c as s,w as t,T as o,V as n,b as u,u as c,e as r,t as i,W as p,X as d,Y as f,j as m,Z as v,_,G as C,F as x,Q as k,o as h,$ as b,a0 as g,a1 as y,M as w,a2 as j,I as B,a3 as F,a4 as U,m as O}from"./index-BkrUuuud.js";import{N as D}from"./index.D1vfVCH7.js";import{M as I}from"./index.BjS9BaQ8.js";import{U as M}from"./index.iLgFxnwZ.js";import{t as S}from"./locales.BWIMgwgX.js";import{_ as A}from"./_plugin-vue_export-helper.BCo6x5W8.js";const T=A(e({__name:"index",props:{height:{},maskClosable:{type:Boolean},title:{}},emits:["confirm","cancel"],setup(e,{expose:_,emit:C}){const x=C,k=e,h=a(!1),b=a(null),g=()=>{B(!1,(()=>{h.value=!1}))},y=()=>{k.maskClosable&&g()},w=()=>{g(),x("cancel")},j=()=>{g(),x("confirm")},B=(e,a)=>{const l=f({duration:300,timingFunction:"ease"});e?l.opacity(1).step():l.opacity(0).step(),b.value=l.export(),a&&setTimeout(a,300)},F=(e,a)=>{const l=f({duration:300,timingFunction:"ease"});e?l.opacity(0).step():l.opacity(1).step(),b.value=l.export()},U=b;return _({openModal:()=>{h.value=!0,B(!0)},closeModal:g}),(e,a)=>{const f=m;return l(),s(f,{class:d(["modal-container",{"modal-container-hide ":!h.value}])},{default:t((()=>[o(u(f,{class:"mask",onClick:y,animation:F},null,512),[[n,h.value]]),u(f,{class:d(["modal"])},{default:t((()=>[u(f,{class:"modal-content",animation:c(U)},{default:t((()=>[u(f,{class:"title"},{default:t((()=>[r(i(k.title),1)])),_:1}),u(f,{class:"content"},{default:t((()=>[p(e.$slots,"default",{},void 0,!0)])),_:3}),u(f,{class:"footer"},{default:t((()=>[u(f,{class:"cancel",onClick:w},{default:t((()=>[r(i(c(v)("modalCancel")),1)])),_:1}),u(f,{class:"confirm",onClick:j},{default:t((()=>[r(i(c(v)("modalConfirm")),1)])),_:1})])),_:1})])),_:3},8,["animation"])])),_:3})])),_:3},8,["class"])}}}),[["__scopeId","data-v-ada07a98"]]),V=A(e({__name:"index",setup(e){const o=a(""),n=a(S("presenceCustom")),p=a(!1),d=a(null),f=a(""),v={Online:"presenceOnline",Offline:"presenceOffline",Away:"presenceAway",Busy:"presenceBusy","Do Not Disturb":"presenceNoDisturb",Custom:"presenceCustom"},A=_.map((e=>({title:S(v[e]||"presenceOffline"),value:e}))),V=C((()=>{o.value=x.appUserStore.getSelfUserInfo().presenceExt})),E=k((()=>_.includes(o.value)?o.value:(f.value=n.value=x.appUserStore.getSelfUserInfo().presenceExt||"","Custom"))),N=()=>{w()},P=e=>{o.value=e.detail.value},$=()=>{d.value.openModal(),p.value=!0},G=()=>{n.value=f.value,p.value=!1},L=()=>{p.value=!1},Q=()=>{x.appUserStore.publishPresence({presenceExt:"Custom"===E.value?n.value:E.value}).finally((()=>{N()}))};return h((()=>{V()})),(e,a)=>{const o=m,v=U,_=O,C=j,x=B;return l(),s(o,{class:"presence-wrap"},{default:t((()=>[u(D,{onOnLeftTap:N},{left:t((()=>[u(o,{class:"title",textContent:i(c(S)("presenceTitle"))},null,8,["textContent"])])),_:1}),u(o,{class:"menu-wrap"},{default:t((()=>[u(C,{class:"radio-group",onChange:P},{default:t((()=>[(l(!0),b(y,null,g(c(A),(e=>(l(),s(_,{key:e.value,class:"label"},{default:t((()=>[u(v,{class:"presence-radio",value:e.value,checked:E.value===e.value,backgroundColor:"#f9fafa",borderColor:"#ACB4B9",activeBackgroundColor:"#009DFF",activeBorderColor:"#009DFF",iconColor:"#fff"},null,8,["value","checked"]),u(I,{class:"presence-menu",title:"Custom"!==e.value?e.title:n.value,showArrow:!1},F({_:2},["Custom"===e.value?{name:"right",fn:t((()=>[u(o,{class:"edit-btn",onClick:$})])),key:"0"}:void 0]),1032,["title"])])),_:2},1024)))),128))])),_:1})])),_:1}),u(T,{ref_key:"modalRef",ref:d,title:c(S)("presenceCustom"),onConfirm:G,onCancel:L},{default:t((()=>[u(o,{class:"content"},{default:t((()=>[u(o,{class:"custom-wrap"},{default:t((()=>[u(x,{class:"input",placeholder:c(S)("presencePlaceholder"),focus:p.value,maxlength:20,modelValue:f.value,"onUpdate:modelValue":a[0]||(a[0]=e=>f.value=e)},null,8,["placeholder","focus","modelValue"]),u(o,{class:"count"},{default:t((()=>[r(i(f.value.length)+" / 20",1)])),_:1})])),_:1})])),_:1})])),_:1},8,["title"]),u(o,{class:"presence-btn-wrap"},{default:t((()=>[u(M,{class:"presence-btn",onClick:Q},{default:t((()=>[r(i(c(S)("presenceConfirm")),1)])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-b62c31b9"]]);export{V as default};
