import{d as e,r as a,a as l,c as s,w as t,D as n,E as o,b as u,u as c,e as r,t as i,F as p,G as d,h as f,H as m,P as v,v as _,s as C,z as k,o as x,J as h,K as b,L as g,M as y,I as w,N as B,O as F,l as O}from"./index-BL3e1pnO.js";import{N as U}from"./index.Dcia6sKh.js";import{M as j}from"./index.i3pF-MlF.js";import{U as A}from"./index.Do4H0PdZ.js";import{t as D}from"./locales.CN6s_NGi.js";import{_ as I}from"./_plugin-vue_export-helper.BCo6x5W8.js";const M=I(e({__name:"index",props:{height:{},maskClosable:{type:Boolean},title:{}},emits:["confirm","cancel"],setup(e,{expose:v,emit:_}){const C=_,k=e,x=a(!1),h=a(null),b=()=>{B(!1,(()=>{x.value=!1}))},g=()=>{k.maskClosable&&b()},y=()=>{b(),C("cancel")},w=()=>{b(),C("confirm")},B=(e,a)=>{const l=uni.createAnimation({duration:300,timingFunction:"ease"});e?l.opacity(1).step():l.opacity(0).step(),h.value=l.export(),a&&setTimeout(a,300)},F=(e,a)=>{const l=uni.createAnimation({duration:300,timingFunction:"ease"});e?l.opacity(0).step():l.opacity(1).step(),h.value=l.export()},O=h;return v({openModal:()=>{x.value=!0,B(!0)},closeModal:b}),(e,a)=>{const v=f;return l(),s(v,{class:d(["modal-container",{"modal-container-hide ":!x.value}])},{default:t((()=>[n(u(v,{class:"mask",onClick:g,animation:F},null,512),[[o,x.value]]),u(v,{class:d(["modal"])},{default:t((()=>[u(v,{class:"modal-content",animation:c(O)},{default:t((()=>[u(v,{class:"title"},{default:t((()=>[r(i(k.title),1)])),_:1}),u(v,{class:"content"},{default:t((()=>[p(e.$slots,"default",{},void 0,!0)])),_:3}),u(v,{class:"footer"},{default:t((()=>[u(v,{class:"cancel",onClick:y},{default:t((()=>[r(i(c(m)("modalCancel")),1)])),_:1}),u(v,{class:"confirm",onClick:w},{default:t((()=>[r(i(c(m)("modalConfirm")),1)])),_:1})])),_:1})])),_:3},8,["animation"])])),_:3})])),_:3},8,["class"])}}}),[["__scopeId","data-v-e67a1080"]]),S=I(e({__name:"index",setup(e){const n=a(""),o=a(D("presenceCustom")),p=a(!1),d=a(null),m=a(""),I={Online:"presenceOnline",Offline:"presenceOffline",Away:"presenceAway",Busy:"presenceBusy","Do Not Disturb":"presenceNoDisturb",Custom:"presenceCustom"},S=v.map((e=>({title:D(I[e]||"presenceOffline"),value:e}))),E=_((()=>{n.value=C.appUserStore.getSelfUserInfo().presenceExt})),N=k((()=>v.includes(n.value)?n.value:(m.value=o.value=C.appUserStore.getSelfUserInfo().presenceExt||"","Custom"))),P=()=>{uni.navigateBack()},T=e=>{n.value=e.detail.value},V=()=>{d.value.openModal(),p.value=!0},L=()=>{o.value=m.value,p.value=!1},z=()=>{p.value=!1},G=()=>{C.appUserStore.publishPresence({presenceExt:"Custom"===N.value?o.value:N.value}).finally((()=>{P()}))};return x((()=>{E()})),(e,a)=>{const n=f,v=F,_=O,C=y,k=w;return l(),s(n,{class:"presence-wrap"},{default:t((()=>[u(U,{onOnLeftTap:P},{left:t((()=>[u(n,{class:"title",textContent:i(c(D)("presenceTitle"))},null,8,["textContent"])])),_:1}),u(n,{class:"menu-wrap"},{default:t((()=>[u(C,{class:"radio-group",onChange:T},{default:t((()=>[(l(!0),h(g,null,b(c(S),(e=>(l(),s(_,{key:e.value,class:"label"},{default:t((()=>[u(v,{class:"presence-radio",value:e.value,checked:N.value===e.value,backgroundColor:"#f9fafa",borderColor:"#ACB4B9",activeBackgroundColor:"#009DFF",activeBorderColor:"#009DFF",iconColor:"#fff"},null,8,["value","checked"]),u(j,{class:"presence-menu",title:"Custom"!==e.value?e.title:o.value,showArrow:!1},B({_:2},["Custom"===e.value?{name:"right",fn:t((()=>[u(n,{class:"edit-btn",onClick:V})])),key:"0"}:void 0]),1032,["title"])])),_:2},1024)))),128))])),_:1})])),_:1}),u(M,{ref_key:"modalRef",ref:d,title:c(D)("presenceCustom"),onConfirm:L,onCancel:z},{default:t((()=>[u(n,{class:"content"},{default:t((()=>[u(n,{class:"custom-wrap"},{default:t((()=>[u(k,{class:"input",placeholder:c(D)("presencePlaceholder"),focus:p.value,maxlength:20,modelValue:m.value,"onUpdate:modelValue":a[0]||(a[0]=e=>m.value=e)},null,8,["placeholder","focus","modelValue"]),u(n,{class:"count"},{default:t((()=>[r(i(m.value.length)+" / 20",1)])),_:1})])),_:1})])),_:1})])),_:1},8,["title"]),u(n,{class:"presence-btn-wrap"},{default:t((()=>[u(A,{class:"presence-btn",onClick:G},{default:t((()=>[r(i(c(D)("presenceConfirm")),1)])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-b1bf86f6"]]);export{S as default};
